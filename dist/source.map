{"version":3,"sources":["lib/utils.js","lib/moving_object.js","lib/bullet.js","lib/powerup.js","lib/ship.js","lib/asteroid.js","lib/game.js","lib/game_view.js","source.js"],"names":["Util","inherits","childClass","parentClass","Surrogate","prototype","constructor","randomVec","difficulty","x","y","Math","floor","random","randomPos","randomNum","num","fragmentChance","rotateAndCache","image","angle","offscreenCanvas","document","createElement","offscreenCtx","getContext","size","max","width","height","translate","rotate","drawImage","hideHomeScreen","getElementById","style","display","revealHTML","module","exports","MovingObject","options","game","pos","vel","radius","isWrappable","wrappable","type","justSpawned","hasPowerup","ctx","fillStyle","color","beginPath","arc","PI","fill","wrap","otherObject","dist","sqrt","pow","radii","Bullet","posOptions","img","Image","onload","lose","win","src","rotatedLaser","Utils","require","PowerUp","powerupType","call","randomPowerup","chance","powerups","draw","powerup","that","Ship","hasTripleShot","currentNumBullets","invulnerable","facingDir","randomPosition","window","setTimeout","bullets","length","Audio","play","removePowerUp","bulletVel","sin","cos","totalBullets","secondBulletPos","thirdBulletPos","abs","round","bullet1","bullet2","push","defaultBulletPos","bullet3","power","impulse","radians","atan2","move","forceField","rotatedShip","Date","now","Asteroid","difficultySetting","removeAsteroid","relocate","decreaseLives","removeBullet","currPos","addAsteroids","heart","Game","setAsteroidCount","asteroids","ship","lives","powerupsArr","DIM_X","DIM_Y","NUM_ASTEROIDS","speed","clearRect","heartPos","i","allObjects","forEach","object","moveObjects","asteroid","newX","newY","fragment","respawnPos","endlessMode","console","log","j","checkCollisions","object1","object2","isCollidedWith","collideWith","idx","indexOf","splice","bullet","powerUp","step","concat","GameView","onHomeScreen","callback","bindKeyHandlers","animate","time","requestAnimationFrame","bind","key","font","innerHTML","left","start","fireBullet","addEventListener","canvasEl","gameView"],"mappings":"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","file":"source.map","sourceRoot":"../src","sourcesContent":["const Util = {\n  inherits: function(childClass, parentClass) {\n    function Surrogate(){}\n    Surrogate.prototype = parentClass.prototype;\n    childClass.prototype = new Surrogate();\n    childClass.prototype.constructor = childClass;\n  },\n\n  randomVec: function(difficulty = \"easy\") {\n    let x;\n    let y;\n    if (difficulty === \"hard\" || difficulty === \"endless\") {\n      x = Math.floor(Math.random() * 4 ) + 1;\n      y = Math.floor(Math.random() * 4 ) + 1;\n    } else {\n      x = Math.floor(Math.random() * 2 ) + 1;\n      y = Math.floor(Math.random() * 2 ) + 1;\n    }\n    return [x,y];\n  },\n\n  randomPos: function() {\n    let x = Math.floor(Math.random() * 600 ) + 1\n    let y= Math.floor(Math.random() * 600 ) + 1\n    return [x,y];\n  },\n\n  randomNum: function() {\n    let num = Math.floor(Math.random() * 2) + 1\n    return num;\n  },\n\n  fragmentChance: function(difficulty = \"easy\") {\n    let num;\n    if (difficulty === \"hard\") {\n      num = Math.floor(Math.random() * 2) + 1\n    } else {\n     num = Math.floor(Math.random() * 3) + 1    \n    }\n    return num\n  },\n\n  rotateAndCache: function(image, angle) {\n    let offscreenCanvas = document.createElement('canvas');\n    let offscreenCtx = offscreenCanvas.getContext('2d');\n\n    let size = Math.max(image.width, image.height);\n    offscreenCanvas.width = size;\n    offscreenCanvas.height = size;\n\n    offscreenCtx.translate(size/2, size/2);\n    offscreenCtx.rotate(angle);\n    offscreenCtx.drawImage(image, -(image.width/2), -(image.height/2));\n\n    return offscreenCanvas;\n  },\n\n  hideHomeScreen: function() {\n    document.getElementById('game-header').style.display=\"none\";\n    document.getElementById('wasd').style.display=\"none\";\n    document.getElementById('difficulty').style.display=\"none\";\n    document.getElementById('li1').style.display=\"none\";\n    document.getElementById('li2').style.display=\"none\";\n    document.getElementById('li3').style.display=\"none\";\n    document.getElementById('li4').style.display=\"none\";\n    document.getElementById('controls').style.display=\"none\";\n    document.getElementById('sub-controls').style.display=\"none\";\n  },\n\n  revealHTML: function() {\n    document.getElementById('game-header').style.display = \"block\";\n    document.getElementById('game-end').style.display = \"block\";\n  }\n\n};\n\nmodule.exports = Util;\n","import Game from './game';\n\nclass MovingObject {\n    constructor(options) {\n        this.game = options.game;\n        this.pos = options.pos;\n        this.vel = options.vel;\n        this.radius = options.radius;\n        this.isWrappable = options.wrappable;\n        this.type = options.type;\n        this.angle = options.angle;\n        this.justSpawned = options.justSpawned;\n        this.hasPowerup = options.hasPowerup;\n    }\n\n    draw(ctx) {\n        ctx.fillStyle = this.color;\n        ctx.beginPath();\n        ctx.arc(\n            this.pos[0],\n            this.pos[1],\n            this.radius,\n            0,\n            2 * Math.PI,\n            false\n        );\n        ctx.fill();\n    }\n\n    move() {\n        if (this.isWrappable) {\n            this.pos = this.game.wrap(this.pos);\n        }\n        this.pos[0] += this.vel[0];\n        this.pos[1] += this.vel[1];\n    };\n\n    isCollidedWith(otherObject) {\n        let dist = Math.sqrt(\n            Math.pow((this.pos[0]-otherObject.pos[0]),2) + \n                Math.pow((this.pos[1]-otherObject.pos[1]),2));\n        let radii = this.radius + otherObject.radius;\n        return dist < radii;\n    };\n\n    collideWith(otherObject) {\n\n    };\n};\n\nmodule.exports = MovingObject;","import Utils from './utils';\nimport MovingObject from './moving_object';\n\nexport default class Bullet extends MovingObject {\n    constructor(posOptions) {\n        super(posOptions);\n        this.radius = 5;\n        this.isWrappable = false;\n        this.type = 0;\n        this.hasPowerup = false;\n    }\n\n    draw(ctx) {\n        const img = new Image();\n        img.onload = () => {\n            if(!this.game.lose() && !this.game.win()) {\n                ctx.drawImage(img, 0, 0)\n            } \n        };\n        img.src = 'images/laser.png';\n        let rotatedLaser = Utils.rotateAndCache(img, this.angle)\n        ctx.drawImage(rotatedLaser, this.pos[0] - this.radius, this.pos[1] - this.radius)\n    };\n}","const Utils = require('./utils.js');\nconst MovingObject = require('./moving_object.js');\n\nfunction PowerUp(posOptions) {\n  let options = {\n    game: posOptions['game'], \n    radius: 15, \n    justSpawned: false,\n    vel: Utils.randomVec(), \n    pos: Utils.randomPos(), \n    type: Utils.randomNum(), \n    wrappable: true, \n    angle: 0,\n    hasPowerup: false\n  }\n  this.powerupType = Math.floor(Math.random() * 2) + 1;\n  MovingObject.call(this, options);\n}\n\nUtils.inherits(PowerUp, MovingObject);\n\nPowerUp.prototype.randomPowerup = function() {\n  let chance = Math.floor(Math.random() * 320)\n  if (chance === 5 && this.game.powerups < 1) {\n    this.game.powerups += 1;\n    return true\n  } else {\n    return false;\n  }\n}\n\nPowerUp.prototype.draw = function (ctx) {\n  const powerup = new Image();\n  let that = this\n  powerup.onload = function () {\n    if(!that.game.lose() && !that.game.win()) {\n      ctx.drawImage(powerup, 0, 0)\n    } \n  };\n  if (this.powerupType === 1) {\n    powerup.src = 'images/powerup.png'\n  } else {\n    powerup.src = 'images/tripleshot.png'\n  }\n  if (this.game.powerups > 0 || this.randomPowerup()) { \n    ctx.drawImage(powerup, this.pos[0]-this.radius, this.pos[1]-this.radius);\n  }\n};\n\nmodule.exports = PowerUp;","import Utils from './utils';\nimport MovingObject from './moving_object';\nimport Bullet from './bullet';\nimport PowerUp from './powerup';\n\nexport default class Ship extends MovingObject {\n\tconstructor(posOptions) {\n\t\tsuper(posOptions);\n\t\tthis.radius = 20;\n\t\tthis.vel = [0,0];\n\t\tthis.isWrappable = true;\n\t\tthis.type = 0;\n\t\tthis.angle = 0;\n\t\tthis.hasPowerup = false;\n\t\tthis.hasTripleShot = false;\n\t\tthis.currentNumBullets = 0;\n\t\tthis.invulnerable = false;\n\t\tthis.facingDir = 0;\n\t}\n\n\trelocate() {\n\t\tthis.invulnerable = true\n\t\tthis.pos = this.game.randomPosition();\n\t\tthis.vel = [0,0];\n\t\twindow.setTimeout(() => {\n\t\t\t\tthis.invulnerable = false;\n\t\t}, 1500);\n\t};\n\n\tcollideWith(otherObject) {\n\t\tif (otherObject instanceof PowerUp) {\n\t\t\tif (otherObject.powerupType === 2) {\n\t\t\t\tthis.hasTripleShot = true;\n\t\t\t\tthis.currentNumBullets = this.game.bullets.length;\n\t\t\t\tnew Audio('sounds/tripleshot.wav').play();\n\t\t\t} else {\n\t\t\t\tthis.hasPowerup = true;\n\t\t\t\tnew Audio('sounds/powerup.wav').play();\n\t\t\t}\n\t\t\tthis.game.removePowerUp(otherObject);\n\t\t\tthis.game.powerups = 0;\n\t\t} \n\t};\n\n\tfireBullet() {\n\t\tlet bulletVel = [Math.sin(-this.facingDir)*-10, Math.cos(-this.facingDir)*-10]\n\t\tif (this.hasTripleShot) {\n\t\t\tlet totalBullets = this.game.bullets.length;\n\t\t\tlet secondBulletPos;\n\t\t\tlet thirdBulletPos;\n\t\t\tif (totalBullets - this.currentNumBullets > 80) {\n\t\t\t\tthis.hasTripleShot = false;\n\t\t\t}\n\t\t\tif (Math.abs(this.facingDir) > 3 || Math.round(this.facingDir) === 0) {\n\t\t\t\tsecondBulletPos = [this.pos[0]-30, this.pos[1]]\n\t\t\t\tthirdBulletPos = [this.pos[0]+30, this.pos[1]]\n\t\t\t} else {\n\t\t\t\tsecondBulletPos = [this.pos[0], this.pos[1]-30]\n\t\t\t\tthirdBulletPos = [this.pos[0], this.pos[1]+30]\n\t\t\t}\n\t\t\tlet bullet1 = new Bullet( {\n\t\t\t\tpos: secondBulletPos, \n\t\t\t\tvel: bulletVel, \n\t\t\t\tgame: this.game, \n\t\t\t\tangle: this.facingDir\n\t\t\t});\n\t\t\tlet bullet2 = new Bullet( {\n\t\t\t\tpos: thirdBulletPos, \n\t\t\t\tvel: bulletVel, \n\t\t\t\tgame: this.game, \n\t\t\t\tangle: this.facingDir\n\t\t\t});\n\t\t\tthis.game.bullets.push(bullet1);\n\t\t\tthis.game.bullets.push(bullet2);\n\t\t}\n\t\tlet defaultBulletPos;\n\t\tif (this.facingDir === 0) {\n\t\t\tdefaultBulletPos = [this.pos[0]-3.5, this.pos[1]-36];\n\t\t} else if (this.facingDir > 3) {\n\t\t\tdefaultBulletPos = [this.pos[0]-3.5, this.pos[1]+36];\n\t\t}\n\t\telse {\n\t\t\tdefaultBulletPos = [this.pos[0], this.pos[1]-6];\n\t\t}\n\t\tlet bullet3 = new Bullet( {\n\t\t\tpos: defaultBulletPos, \n\t\t\tvel: bulletVel, \n\t\t\tgame: this.game, \n\t\t\tangle: this.facingDir\n\t\t});\n\t\tthis.game.bullets.push(bullet3);\n\t\tnew Audio('sounds/laser.wav').play();\n\t};\n}\n\n\nShip.prototype.power = function (impulse) {\n\tthis.vel[0] += impulse[0];\n\tthis.vel[1] += impulse[1];\n\tlet radians = Math.atan2(-this.vel[0], -this.vel[1]) * -1;\n\tthis.facingDir = radians;\n};\n\nShip.prototype.move = function () {\n\tif (this.isWrappable) {\n\t\tthis.pos = this.game.wrap(this.pos);\n\t}\n\tthis.pos[0] += this.vel[0];\n\tthis.pos[1] += this.vel[1];\n\t//Attenuate velocity over time\n\tthis.vel[0] *= .98;\n\tthis.vel[1] *= .98;\n};\n\nShip.prototype.draw = function (ctx) {\n\tconst img = new Image();\n\tconst forceField = new Image();\n\tlet that = this\n\timg.onload = function () {\n\t\tif(!that.game.lose() && !that.game.win()) {\n\t\t\tctx.drawImage(img, 0, 0)\n\t\t} \n\t};\n\tforceField.onload = function() {\n\t\tif(!that.game.lose() && !that.game.win()) {\n\t\t\tctx.drawImage(forceField, 0, 0)\n\t\t}\n\t};\n\tforceField.src = 'images/forcefield.png';\n\timg.src = 'images/galaga_ship.png';\n\tlet rotatedShip = Utils.rotateAndCache(img,this.facingDir)\n\t// Blink sprite to indicate invulnerabiltiy \n\tif (!this.invulnerable || Math.floor(Date.now() / 60) % 2) {\n\t ctx.drawImage(rotatedShip, this.pos[0]-this.radius, this.pos[1]-this.radius);\n\t} \n\tif (this.hasPowerup) { \n\t\tctx.drawImage(forceField, this.pos[0]-38, this.pos[1]-38);\n\t}\n};","import Utils from './utils';\nimport MovingObject from './moving_object';\nimport Ship from './ship';\nimport Bullet from './bullet';\n\nexport default class Asteroid extends MovingObject {\n    constructor(posOptions) {\n        super(posOptions);\n        this.angle = 0;\n        this.hasPowerup = false;\n        this.isWrappable = true;\n        this.type = Utils.randomNum();\n        this.vel = Utils.randomVec(posOptions['game'.difficultySetting]);\n    }\n\n    collideWith(otherObject) {\n        if (otherObject instanceof Ship && !otherObject.invulnerable) {\n            if (otherObject.hasPowerup) {\n            otherObject.hasPowerup = false\n            this.game.removeAsteroid(this);\n            } else {\n                otherObject.relocate();\n                new Audio('sounds/hit.wav').play();\n                this.game.decreaseLives();\n            }\n        } else if (otherObject instanceof Bullet) {\n            if (this.radius === 30 && Utils.fragmentChance(this.game.difficultySetting) === 1) {\n                this.game.removeBullet(otherObject);\n                let currPos = this.pos\n                this.game.addAsteroids(true, [this.pos[0],this.pos[1]]);\n                this.game.removeAsteroid(this);\n            } else {\n                this.game.removeBullet(otherObject);\n                this.game.removeAsteroid(this);\n            } \n            if (this.radius === 30) {\n                new Audio('sounds/explosion.wav').play();\n            } else {\n                new Audio('sounds/explosionsmall.wav').play();\n            }\n        }\n    };\n}\n\n  \nAsteroid.prototype.draw = function (ctx) {\n  if (this.type === 1) {\n  const img = new Image();\n   img.onload = () => {\n    if(!this.game.lose() && !this.game.win()) {\n      ctx.drawImage(img, 0, 0)\n    } \n  };\n    if (this.radius === 15) {\n      img.src = 'images/smallasteroid1.png';\n    } else {\n      img.src = 'images/asteroid1.png'\n    }\n  ctx.drawImage(img, this.pos[0]-this.radius, this.pos[1]-this.radius);\n  } else {\n    const img = new Image();\n   img.onload = () => {\n    if(!this.game.lose() && !this.game.win()) {\n      ctx.drawImage(img, 0, 0)\n    } \n  };\n   if (this.radius === 15) {\n    img.src = 'images/smallasteroid2.png'\n   } else {\n    img.src = 'images/asteroid2.png';\n   }\n  ctx.drawImage(img, this.pos[0]-this.radius, this.pos[1]-this.radius);\n  }\n};","import Asteroid from './asteroid';\nimport Ship from './ship';\nimport PowerUp from './powerup';\nconst img = new Image();\nconst heart = new Image();\n\nexport default class Game {\n    constructor(difficulty) {\n        this.difficultySetting = difficulty;\n        this.setAsteroidCount(this.difficultySetting);\n        this.asteroids = [];\n        this.addAsteroids();\n        this.ship = new Ship({pos: this.randomPosition(), game: this});\n        this.powerup = new PowerUp({game: this});\n        this.bullets = [];\n        this.lives = 3;\n        this.powerups = 0;\n        this.powerupsArr = [this.powerup];\n        // Start game with 2 seconds of invulnerability\n    }\n}\nGame.DIM_X = 800;\nGame.DIM_Y = 605;\nGame.NUM_ASTEROIDS = 5;\n\nGame.prototype.setAsteroidCount = function (difficulty) {\n  switch (difficulty) {\n    case \"easy\":\n      Game.NUM_ASTEROIDS = 5;\n      break;\n\n    case \"medium\": \n      Game.NUM_ASTEROIDS = 7;\n      break;\n\n    case \"hard\":\n      Game.NUM_ASTEROIDS = 10;\n      break;\n\n    default:\n      Game.NUM_ASTEROIDS = 5;\n  }\n}\n\nGame.prototype.draw = function(ctx, speed) {\n  \n  ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  let that = this;\n  img.onload = function () {\n    if(!that.lose() && !that.win()) {\n      ctx.drawImage(img, 0, 0)\n    } \n  };\n  heart.onload = function () {\n    if(!that.lose() && !that.win()) {\n      ctx.drawImage(heart, 0, 0);\n    }\n  }\n  heart.src = 'images/heart.png';\n  img.src = 'images/space.png';\n  let y = 0;\n  let x = 0;\n  let heartPos = 0;\n  y += speed;\n  ctx.drawImage(img, x,y);\n  ctx.drawImage(img, x, y - Game.DIM_Y);\n\n  for (var i = this.lives-1; i >= 0; i--) {\n    ctx.drawImage(heart, heartPos, 0);\n    heartPos += 40\n  }\n\n  if (y >= Game.DIM_Y) {\n      y = 0;\n  };\n  this.allObjects().forEach( (object) => {\n    object.draw(ctx);\n  });\n};\n\nGame.prototype.moveObjects = function () {\n  this.allObjects().forEach( (asteroid) => {\n    asteroid.move();\n  });\n};\n\nGame.prototype.wrap = function(pos) {\n  let newX = pos[0];\n  let newY = pos[1];\n  if (newX > Game.DIM_X + 50) {\n    newX = 0;\n  }\n  if (newY > Game.DIM_Y + 50) {\n    newY = 0;\n  }\n  if (newX < 0) {\n    newX = Game.DIM_X;\n  }\n  if (newY < 0) {\n    newY = Game.DIM_Y;\n  }\n  return [newX, newY];\n};\n\n\nGame.prototype.decreaseLives = function() {\n  this.lives -= 1;\n}\n\nGame.prototype.lose = function() {\n  if (this.lives <= 0) {\n    return true;\n  } else {\n    return false;\n  };\n}\n\nGame.prototype.win = function() {\n  if (this.asteroids.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nGame.prototype.addAsteroids = function(fragment = null, respawnPos = null, endlessMode = false) {\n  if (endlessMode) {\n    console.log(this.asteroids.length)\n    for (let j = 0; j < 5; j++) {\n      let y = Math.floor(Math.random() * 500);\n      let asteroid = new Asteroid({game: this, pos: [800, y], radius: 30});\n      this.asteroids.push(asteroid);   \n    }\n  } else if (fragment === null) {\n    for (let i = 0; i < Game.NUM_ASTEROIDS; i++) {\n      let x = Math.floor(Math.random() * 500);\n      let y = Math.floor(Math.random() * 500);\n      let asteroid = new Asteroid({game: this, pos: [x, y], radius: 30});\n      this.asteroids.push(asteroid);\n    } \n  } else {\n      for (let i = 0; i < 3; i++) {\n        let x = respawnPos[0]; \n        let y = respawnPos[1];\n        let asteroid = new Asteroid({game: this, pos: [x, y], radius: 15, justSpawned: true})\n        this.asteroids.push(asteroid)\n      }\n    }\n};\n\nGame.prototype.checkCollisions = function () {\n  this.allObjects().forEach( (object1) => {\n    this.allObjects().forEach( (object2) => {\n      if (object1.isCollidedWith(object2) && object1 !== object2) {\n        object1.collideWith(object2);\n      }\n    });\n  });\n};\n\nGame.prototype.removeAsteroid = function (asteroid) {\n  let idx = this.asteroids.indexOf(asteroid);\n  if (idx > -1) {\n    this.asteroids.splice(idx, 1);\n  }\n};\n\nGame.prototype.removeBullet = function (bullet) {\n  let idx = this.bullets.indexOf(bullet);\n  if (idx > -1) {\n    this.bullets.splice(idx, 1);\n  }\n};\n\nGame.prototype.removePowerUp = function (powerUp) {\n  let idx = this.powerupsArr.indexOf(powerUp);\n  if (idx > -1) {\n    this.powerupsArr.splice(idx, 1);\n  }\n};\n\nGame.prototype.step = function () {\n  this.moveObjects();\n  this.checkCollisions();\n  if (this.difficultySetting === \"endless\" && this.asteroids.length < 5) {\n    this.addAsteroids(null, null, true);\n  }\n};\n\nGame.prototype.allObjects = function () {\n  return this.asteroids.concat([this.ship]).concat(this.bullets).concat(this.powerupsArr);\n};\n\nGame.prototype.randomPosition = function () {\n  let x = Math.floor(Math.random() * Game.DIM_X);\n  let y = Math.floor(Math.random() * Game.DIM_Y);\n  return [x,y];\n};\n\n//module.exports = Game;","import Game from './game';\nimport Utils from './utils';\nconst img = new Image();\nconst DIM_X = 800;\nconst DIM_Y = 605;\nlet speed = 1;\nlet difficultySetting = \"easy\"\n\nclass GameView {\n    constructor(ctx) {\n        this.ctx = ctx;\n        this.game = new Game(\"easy\");\n        this.onHomeScreen = true;\n    }\n\n    start(callback) {\n        this.bindKeyHandlers();\n        this.animate(0);\n    }\n\n    animate(time) {\n        speed += 1;\n        if (speed >= 605) {\n            speed = 0;\n        };\n\n        if (this.onHomeScreen) {\n            let that = this;\n            img.onload = function () {\n              that.ctx.drawImage(img, 0, 0)\n        };\n\n        img.src = 'images/space.png';\n        let y = 0;\n        let x = 0;\n        y += speed;\n        this.ctx.drawImage(img, x,y);\n        this.ctx.drawImage(img, x, y - DIM_Y);\n\n        if (y >= DIM_Y) {\n            y = 0;\n        };\n\n        requestAnimationFrame(this.animate.bind(this));\n        key('enter', ()=> {\n            this.onHomeScreen = false;\n            Utils.hideHomeScreen(); \n        });\n\n        key('1', () => {\n            this.onHomeScreen = false;\n            Utils.hideHomeScreen();\n        });\n\n        key('2', () => {\n            this.onHomeScreen = false;\n            Utils.hideHomeScreen();\n            this.game = new Game(\"medium\");\n        });\n\n        key('3', () => {\n            this.onHomeScreen = false;\n            Utils.hideHomeScreen();\n            this.game = new Game(\"hard\");\n        });\n\n        key('4', () => {\n            this.onHomeScreen = false;\n            Utils.hideHomeScreen();\n            this.game = new Game(\"endless\");\n        });\n        } else {\n            this.game.step();\n            this.game.draw(this.ctx, speed);\n            if(!this.game.lose() && !this.game.win()){\n                requestAnimationFrame(this.animate.bind(this));\n        } else {\n            this.ctx.fillStyle = \"white\";\n            this.ctx.font = \"italic \"+24+\"pt Arial\";\n            that = this;\n            if(this.game.win()){\n                document.getElementById('game-header').innerHTML = \"You Win\";\n                document.getElementById('game-header').style.left = \"235px\";\n                Utils.revealHTML();\n                new Audio('sounds/victory.wav').play();\n            } else {\n                document.getElementById('game-header').innerHTML = \"GAME OVER\";\n                Utils.revealHTML();\n                new Audio('sounds/loss.wav').play();\n            }\n                key('enter', ()=>{\n                this.game = new Game();\n                this.start();\n            });\n        }\n      }\n    }\n\n    bindKeyHandlers() {\n        key('d', () => {\n            this.game.ship.power([2, 0]);\n        });\n        key('a', () => {\n            this.game.ship.power([-2, 0]);\n        });\n        key('s', () => {\n            this.game.ship.power([0, 2]);\n        });\n        key('w', () => {\n            this.game.ship.power([0, -2]);\n        });\n        key('l', () => {\n            this.game.ship.fireBullet();\n        });\n    }\n}\n\n\nmodule.exports = GameView;","import GameView from './lib/game_view.js';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  let canvasEl = document.getElementById('game-canvas');\n  let ctx = canvasEl.getContext('2d');\n  let gameView = new GameView(ctx);\n  gameView.start();\n});\n"]}